import{a as R}from"./NavLink-xWss-cnr.js";import{f as n,o as a,b as e,a as i,u as t,_ as s,Z as j,w as u,c as C,g as _,e as h,t as r,n as m,F as g,y as $,Q as f,T as b,l as x}from"./app-CPP_pojj.js";import{_ as A}from"./FlexButton-DGaEKOfz.js";import{_ as S}from"./ReqTabs-CC3cHBac.js";import{_ as B}from"./Card-CK0H_5M3.js";import{r as N}from"./useRequestStatusTypes-kDkI6aNd.js";import{r as E}from"./CalendarDaysIcon-g7kbSFgR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function M(d,l){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}function T(d,l){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function q(d,l){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function V(d,l){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const D={class:"py-8 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8 animate-fade-in-up"},L={class:"p-8 border-b border-white/5 flex flex-col md:flex-row md:justify-between md:items-center gap-6 bg-white/[0.02]"},P={class:"text-3xl font-black text-white tracking-tight flex items-center gap-3"},F={class:"text-sm font-medium text-gray-500 bg-white/5 px-2.5 py-1 rounded-lg border border-white/10 uppercase tracking-widest"},I={class:"text-gray-400 text-sm mt-1"},O={class:"font-bold"},z={class:"overflow-x-auto"},H={class:"w-full text-left border-collapse"},Q={class:"bg-black/20"},Z={class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5"},G={class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5"},J={class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5 text-center"},K={class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5 text-center"},U={key:0,class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5"},W={key:1,class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5 text-right"},X={class:"divide-y divide-white/5"},Y={class:"px-6 py-5 font-mono text-sm font-bold text-red-500/80"},ee={class:"px-6 py-5"},te={class:"flex flex-col"},se={class:"text-white font-bold group-hover:text-red-400 transition-colors"},re={class:"text-xs text-gray-500"},oe={class:"px-6 py-5"},ae={class:"flex items-center justify-center gap-3 text-sm"},ne={class:"text-center"},ce={class:"text-white font-medium"},ie={class:"text-[10px] text-gray-500 uppercase"},de={class:"text-center"},le={class:"text-white font-medium"},pe={class:"text-[10px] text-gray-500 uppercase"},ue={class:"px-6 py-5 text-center"},xe={key:0,class:"px-6 py-5 max-w-[200px]"},he={class:"text-sm text-gray-400 line-clamp-2"},_e={key:1,class:"px-6 py-5 text-right"},me={key:0,class:"flex items-center justify-end gap-2"},ge=["onClick","title"],fe=["onClick","title"],be={key:1,class:"text-xs text-gray-500 italic"},we={key:2,class:"text-xs text-gray-500 italic"},ye={key:0},ve={colspan:"5",class:"px-6 py-20 text-center"},ke={class:"flex flex-col items-center gap-4 opacity-20"},Re={class:"text-xl font-bold text-white"},Te={__name:"Requests",props:{requests:Object,leaveBalances:Array,leaveTotals:Object},setup(d){const l=c=>{switch(c){case"Pending":return"text-amber-400 bg-amber-400/10 border-amber-400/20";case"Approved":return"text-emerald-400 bg-emerald-400/10 border-emerald-400/20";case"Rejected":return"text-rose-400 bg-rose-400/10 border-rose-400/20";default:return"text-gray-400 bg-gray-400/10 border-gray-400/20"}},w=c=>{b({status:1}).put(route("requests.update",{request:c}),{preserveScroll:!0,onSuccess:()=>{x().success(s("Request Approved"))},onError:o=>{x().error(o.status||s("Error Approving Request"))}})},y=c=>{b({status:2}).put(route("requests.update",{request:c}),{preserveScroll:!0,onSuccess:()=>{x().success(s("Request Rejected"))},onError:o=>{x().error(o.status||s("Error Rejecting Request"))}})},v=c=>{const p=f().props.auth.user.role,o=f().props.auth.user.id;return c.user_id===o?!1:p==="owner"&&c.employee_role==="admin"||p==="admin"&&c.employee_role==="employee"};return(c,p)=>(a(),n(g,null,[i(t(j),{title:t(s)("Requests")},null,8,["title"]),i(R,null,{tabs:u(()=>[i(S)]),default:u(()=>[e("div",D,[i(B,{variant:"glass",class:"!mt-0 !p-0 overflow-hidden"},{default:u(()=>[e("div",L,[e("div",null,[e("h1",P,[h(r(t(s)("Leave Requests"))+" ",1),e("span",F,r(d.requests.data.length)+" "+r(t(s)("Total")),1)]),e("p",I,r(t(s)("Manage and track your time-off applications.")),1)]),["owner"].includes(c.$page.props.auth.user.role)?_("",!0):(a(),C(A,{key:0,href:c.route("requests.create"),class:m("!bg-red-600 hover:!bg-red-700 !rounded-xl !px-6 !py-3 !text-white flex items-center gap-2 transition-all shadow-xl hover:shadow-red-500/20 group")},{default:u(()=>[i(t(q),{class:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300"}),e("span",O,r(t(s)("New Request")),1)]),_:1},8,["href"]))]),e("div",z,[e("table",H,[e("thead",null,[e("tr",Q,[e("th",Z,r(t(s)("ID")),1),e("th",G,r(t(s)("Employee / Type")),1),e("th",J,r(t(s)("Duration")),1),e("th",K,r(t(s)("Status")),1),["admin","owner"].includes(c.$page.props.auth.user.role)?(a(),n("th",W,r(t(s)("Action")),1)):(a(),n("th",U,r(t(s)("Reason")),1))])]),e("tbody",X,[(a(!0),n(g,null,$(d.requests.data,(o,je)=>(a(),n("tr",{key:o.id,class:"group hover:bg-white/[0.02] transition-colors"},[e("td",Y," #"+r(o.id.toString().padStart(4,"0")),1),e("td",ee,[e("div",te,[e("span",se,r(o.employee_name),1),e("span",re,r(o.type),1)])]),e("td",oe,[e("div",ae,[e("div",ne,[e("p",ce,r(o.start_date),1),e("p",ie,r(t(s)("Start")),1)]),i(t(M),{class:"w-3 h-3 text-red-500/40"}),e("div",de,[e("p",le,r(o.end_date??t(s)("N/A")),1),e("p",pe,r(t(s)("End")),1)])])]),e("td",ue,[e("span",{class:m([l(o.status),"inline-flex items-center px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border shadow-sm"])},r(t(N)[o.status.toLowerCase()]||o.status),3)]),["admin","owner"].includes(c.$page.props.auth.user.role)?(a(),n("td",_e,[o.status==="Pending"&&v(o)?(a(),n("div",me,[e("button",{onClick:k=>w(o.id),class:"inline-flex items-center gap-1.5 text-xs font-bold text-emerald-400 hover:text-white bg-emerald-500/10 hover:bg-emerald-600 px-3 py-2 rounded-lg border border-emerald-500/20 hover:border-emerald-600 transition-all shadow-sm",title:t(s)("Approve")},[i(t(T),{class:"w-4 h-4"}),h(" "+r(t(s)("Approve")),1)],8,ge),e("button",{onClick:k=>y(o.id),class:"inline-flex items-center gap-1.5 text-xs font-bold text-rose-400 hover:text-white bg-rose-500/10 hover:bg-rose-600 px-3 py-2 rounded-lg border border-rose-500/20 hover:border-rose-600 transition-all shadow-sm",title:t(s)("Reject")},[i(t(V),{class:"w-4 h-4"}),h(" "+r(t(s)("Reject")),1)],8,fe)])):o.status==="Pending"?(a(),n("span",be,r(t(s)("Awaiting approval")),1)):(a(),n("span",we,r(t(s)("Already processed")),1))])):(a(),n("td",xe,[e("span",he,r(o.remark||t(s)("No reason provided")),1)]))]))),128)),d.requests.data.length===0?(a(),n("tr",ye,[e("td",ve,[e("div",ke,[i(t(E),{class:"w-16 h-16 text-white"}),e("p",Re,r(t(s)("No requests found")),1)])])])):_("",!0)])])])]),_:1})])]),_:1})],64))}};export{Te as default};
