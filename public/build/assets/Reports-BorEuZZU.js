import{_ as D,a as O,b as U}from"./Card-Ce8TQ4JY.js";import{f as l,o as d,b as e,r as $,g as k,a,u as i,_ as C,Z as E,w as u,t as r,n as m,h as F,F as A,s as S,e as N,N as J}from"./app-Da_q7YT1.js";import{_ as z}from"./GoBackNavLink-DlzU94TP.js";import{r as Y}from"./CalendarDaysIcon-ZzQ6FME1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function T(b,o){return d(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})])}function Z(b,o){return d(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}const q={class:"ml-auto hidden md:flex items-center gap-3"},G={class:"relative"},H={key:0,class:"absolute right-0 mt-2 w-44 bg-[#18181b] border border-white/10 rounded-xl shadow-2xl z-50 overflow-hidden"},I=["onClick"],K={class:"py-8 max-w-full mx-auto sm:px-6 lg:px-8"},Q={class:"mb-6 flex items-center justify-between"},W={class:"text-sm text-gray-500"},X={class:"text-right"},f={class:"grid grid-cols-3 gap-4 mb-6"},ee={class:"bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-4 text-center"},te={class:"text-2xl font-bold text-emerald-400"},se={class:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 text-center"},re={class:"text-2xl font-bold text-amber-400"},oe={class:"bg-red-500/10 border border-red-500/20 rounded-xl p-4 text-center"},ne={class:"text-2xl font-bold text-red-400"},ae={class:"w-full"},le={class:"divide-y divide-white/5"},de={class:"px-5 py-4 text-sm text-gray-500"},ce={class:"px-5 py-4 text-sm font-medium text-white"},ie={class:"px-5 py-4 text-center text-sm font-semibold text-emerald-400"},xe={class:"px-5 py-4 text-center text-sm font-semibold text-amber-400"},pe={class:"px-5 py-4 text-center text-sm font-semibold text-red-400"},ue={class:"px-5 py-4 text-right"},me={key:0,class:"py-16 text-center"},be={class:"text-gray-500"},ye={__name:"Reports",props:{staffAttendance:Array,month:String,totalPresent:Number,totalLate:Number,totalAbsent:Number},setup(b){const o=b,L=["January","February","March","April","May","June","July","August","September","October","November","December"],h=new Date(o.month+"-01"),v=$(h.getMonth()),p=$(!1);function j(c){v.value=c,p.value=!1;const s=(c+1).toString().padStart(2,"0"),t=h.getFullYear();J.get(route("reports.index"),{month:`${t}-${s}`},{preserveState:!0})}const _=k(()=>L[v.value]);function P(){const c=["No","Name","Present","Late","Absent","Attendance Rate"],s=o.staffAttendance.map((n,V)=>{const M=n.present+n.late+n.absent,B=M>0?((n.present+n.late)/M*100).toFixed(0):0;return[V+1,n.name,n.present,n.late,n.absent,B+"%"]}),t=[c,...s].map(n=>n.join(",")).join(`
`),x=new Blob([t],{type:"text/csv"}),w=URL.createObjectURL(x),y=document.createElement("a");y.href=w,y.download=`attendance-report-${o.month}.csv`,y.click(),URL.revokeObjectURL(w)}const R=k(()=>o.totalPresent+o.totalLate+o.totalAbsent),g=k(()=>R.value>0?((o.totalPresent+o.totalLate)/R.value*100).toFixed(0):0);return(c,s)=>(d(),l(A,null,[a(i(E),{title:i(C)("Attendance Report")},null,8,["title"]),a(U,null,{tabs:u(()=>[a(z),a(O,{href:c.route("reports.index"),active:c.route().current("reports.index")},{default:u(()=>[N(r(i(C)("Reports")),1)]),_:1},8,["href","active"]),e("div",q,[e("div",G,[e("button",{onClick:s[0]||(s[0]=t=>p.value=!p.value),class:"flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-sm font-medium text-gray-200 hover:bg-white/10 transition-all"},[a(i(Y),{class:"w-4 h-4 text-red-400"}),N(" "+r(_.value)+" ",1),a(i(Z),{class:m(["w-3 h-3",{"rotate-180":p.value}])},null,8,["class"])]),p.value?(d(),l("div",H,[(d(),l(A,null,S(L,(t,x)=>e("button",{key:t,onClick:w=>j(x),class:m(["w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-red-500/10 hover:text-red-400 transition-colors",{"bg-red-500/10 text-red-400 font-bold":v.value===x}])},r(t),11,I)),64))])):F("",!0)]),e("button",{onClick:P,class:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-bold transition-all"},[a(i(T),{class:"w-4 h-4"}),s[1]||(s[1]=N(" Export ",-1))])])]),default:u(()=>[e("div",K,[e("div",Q,[e("div",null,[s[2]||(s[2]=e("h1",{class:"text-2xl font-bold text-white"},"Attendance Report",-1)),e("p",W,r(_.value)+" "+r(i(h).getFullYear()),1)]),e("div",X,[e("p",{class:m(["text-3xl font-bold",g.value>=90?"text-emerald-400":g.value>=80?"text-amber-400":"text-red-400"])},r(g.value)+"%",3),s[3]||(s[3]=e("p",{class:"text-xs text-gray-500 uppercase"},"Overall Attendance",-1))])]),e("div",f,[e("div",ee,[e("p",te,r(o.totalPresent),1),s[4]||(s[4]=e("p",{class:"text-xs text-gray-400 uppercase mt-1"},"Present",-1))]),e("div",se,[e("p",re,r(o.totalLate),1),s[5]||(s[5]=e("p",{class:"text-xs text-gray-400 uppercase mt-1"},"Late",-1))]),e("div",oe,[e("p",ne,r(o.totalAbsent),1),s[6]||(s[6]=e("p",{class:"text-xs text-gray-400 uppercase mt-1"},"Absent",-1))])]),a(D,{variant:"glass",class:"!mt-0 !p-0 overflow-hidden"},{default:u(()=>[e("table",ae,[s[7]||(s[7]=e("thead",{class:"bg-white/5"},[e("tr",{class:"text-xs uppercase tracking-wider font-bold text-gray-500"},[e("th",{class:"px-5 py-4 text-left w-12"},"#"),e("th",{class:"px-5 py-4 text-left"},"Staff Name"),e("th",{class:"px-5 py-4 text-center w-20"},"Present"),e("th",{class:"px-5 py-4 text-center w-20"},"Late"),e("th",{class:"px-5 py-4 text-center w-20"},"Absent"),e("th",{class:"px-5 py-4 text-right w-28"},"Rate")])],-1)),e("tbody",le,[(d(!0),l(A,null,S(o.staffAttendance,(t,x)=>(d(),l("tr",{key:t.name,class:"hover:bg-white/5 transition-colors"},[e("td",de,r(x+1),1),e("td",ce,r(t.name),1),e("td",ie,r(t.present),1),e("td",xe,r(t.late),1),e("td",pe,r(t.absent),1),e("td",ue,[e("span",{class:m(["inline-block min-w-[50px] px-2 py-1 rounded text-xs font-bold text-center",t.present+t.late+t.absent>0&&(t.present+t.late)/(t.present+t.late+t.absent)*100>=90?"bg-emerald-500/20 text-emerald-400":t.present+t.late+t.absent>0&&(t.present+t.late)/(t.present+t.late+t.absent)*100>=80?"bg-amber-500/20 text-amber-400":"bg-red-500/20 text-red-400"])},r(t.present+t.late+t.absent>0?((t.present+t.late)/(t.present+t.late+t.absent)*100).toFixed(0):0)+"% ",3)])]))),128))])]),o.staffAttendance.length===0?(d(),l("div",me,[e("p",be,"No attendance records for "+r(_.value),1)])):F("",!0)]),_:1})])]),_:1})],64))}};export{ye as default};
