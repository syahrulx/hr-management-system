import{f as m,o as h,b as e,T as Z,h as D,A as k,l as I,a as o,u as t,_ as a,Z as P,w as _,e as B,t as n,F as L,s as C,v as N,d as U,y as A,z,E as H,k as M,Q as S}from"./app-x9X0OzoV.js";import{_ as R,b as Y}from"./Card-uT5VCw16.js";import{_ as x,a as w}from"./InputLabel-C_WTixpn.js";import{P as G}from"./PrimaryButton-DR46Q2m8.js";import{r as O,_ as X}from"./ReqTabs-C6g6ll4v.js";import{o as J}from"./main-CjS8vrXj.js";import{r as Q}from"./CalendarDaysIcon-DB0YYNJS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GoBackNavLink-DY91qUZX.js";function W(d,g){return h(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}function K(d,g){return h(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function ee(d,g){return h(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})])}const te={class:"py-8 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8 animate-fade-in-up"},se={class:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start"},ae={class:"lg:col-span-3 space-y-6"},oe={class:"absolute -right-4 -top-4 opacity-5 group-hover:opacity-10 transition-opacity"},re={class:"text-lg font-bold text-white mb-6 flex items-center gap-2"},le={class:"space-y-6"},ne={class:"flex items-center justify-between mb-2"},ie={class:"flex flex-col"},de={class:"text-sm font-bold text-white"},ce={class:"text-[10px] uppercase tracking-wider text-gray-500"},pe={class:"text-right"},ue={class:"text-lg font-black text-red-500"},me={class:"h-1.5 w-full bg-white/5 rounded-full overflow-hidden"},he={class:"p-6 rounded-2xl bg-emerald-500/5 border border-emerald-500/10 backdrop-blur-sm"},ge={class:"text-emerald-400 font-bold mb-2 flex items-center gap-2 uppercase tracking-tighter text-sm font-mono"},_e={class:"text-[11px] text-gray-400 leading-relaxed"},fe={class:"lg:col-span-9"},ve={class:"p-8 border-b border-white/5 bg-white/[0.02]"},xe={class:"text-3xl font-black text-white tracking-tight"},we={class:"text-gray-400 text-sm mt-1"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},ye={class:"space-y-1.5"},ke={class:"relative group"},Be={selected:"",value:"",class:"bg-[#18181b]"},Le=["value"],Me={class:"space-y-1.5"},De={class:"space-y-1.5"},Ce=["placeholder"],Ae={class:"space-y-1.5"},Se={class:"relative flex items-center gap-3 p-1.5 bg-white/5 border border-white/10 rounded-xl group hover:border-white/20 transition-colors"},Re={class:"relative shrink-0"},je={class:"px-4 py-2 bg-white/10 group-hover:bg-white/15 text-white text-xs font-bold uppercase tracking-wider rounded-lg transition-colors flex items-center gap-2"},Ve={class:"flex-1 min-w-0 pr-3"},$e={class:"text-sm text-gray-400 truncate font-mono"},Ee={class:"mt-1 text-xs text-gray-500 pl-1"},Fe={class:"flex items-center justify-end pt-4 border-t border-white/5"},qe={class:"font-black uppercase tracking-widest text-sm"},Ge={__name:"RequestCreate",props:{types:Array,leaveBalances:Array},setup(d){const g=["Annual Leave","Sick Leave","Emergency Leave"],s=Z({type:"",date:"",remark:"",support_doc:null}),j=D(()=>s.type==="Annual Leave"?k().add(7,"day").toDate():k().toDate()),V=D(()=>s.type==="Annual Leave"?4:null);I(()=>s.type,c=>{s.date=""});const $=()=>{Object.keys(s.date).forEach(function(c){s.date[c]&&!/^\d{4}-\d{2}-\d{2}$/.test(s.date[c])&&(s.date[c]=k(s.date[c]).format("YYYY-MM-DD"))}),s.post(route("requests.store"),{preserveScroll:!0,onError:()=>{S().props.errors.past_leave?M().error(S().props.errors.past_leave):M().error(a("Error Creating Request"))},onSuccess:()=>{M().success(a("Request Created Successfully")),s.reset()}})},E=c=>{const l=c.target.files[0];if(!l)return;if(l.type==="application/pdf"){s.support_doc=l;return}if(l.size<1024*1024){s.support_doc=l;return}const r=new FileReader;r.readAsDataURL(l),r.onload=f=>{const i=new Image;i.src=f.target.result,i.onload=()=>{const v=document.createElement("canvas"),F=v.getContext("2d"),b=1200,y=1200;let p=i.width,u=i.height;p>u?p>b&&(u*=b/p,p=b):u>y&&(p*=y/u,u=y),v.width=p,v.height=u,F.drawImage(i,0,0,p,u),v.toBlob(q=>{const T=new File([q],l.name,{type:"image/jpeg",lastModified:Date.now()});s.support_doc=T},"image/jpeg",.7)}}};return(c,l)=>(h(),m(L,null,[o(t(P),{title:t(a)("Request Leave")},null,8,["title"]),o(Y,null,{tabs:_(()=>[o(X)]),default:_(()=>[e("div",te,[e("div",se,[e("aside",ae,[o(R,{variant:"glass",class:"!mt-0 relative overflow-hidden group"},{default:_(()=>[e("div",oe,[o(t(W),{class:"w-32 h-32 text-white"})]),e("h2",re,[o(t(Q),{class:"w-5 h-5 text-red-500"}),B(" "+n(t(a)("Leave Balances")),1)]),e("div",le,[(h(),m(L,null,C(g,r=>{var f;return e("div",{key:r,class:"group/item"},[e("div",ne,[e("div",ie,[e("span",de,n(t(a)(r)),1),e("span",ce,n(t(a)("Remaining Days")),1)]),e("div",pe,[e("span",ue,n(d.leaveBalances&&d.leaveBalances.find(i=>i.leave_type===r)?d.leaveBalances.find(i=>i.leave_type===r).balance:0),1)])]),e("div",me,[e("div",{class:"h-full bg-gradient-to-r from-red-600 to-red-400 rounded-full group-hover/item:opacity-80 transition-all shadow-[0_0_10px_rgba(239,68,68,0.3)]",style:N({width:`${Math.min((d.leaveBalances&&((f=d.leaveBalances.find(i=>i.leave_type===r))==null?void 0:f.balance)||0)/(r==="Emergency Leave"?7:14)*100,100)}%`})},null,4)])])}),64))])]),_:1}),e("div",he,[e("h4",ge,[o(t(K),{class:"w-4 h-4"}),B(" "+n(t(a)("Important")),1)]),e("p",_e,n(t(a)("Please ensure all required documents are ready if you are applying for Sick Leave or long-term Absence.")),1)])]),e("main",fe,[o(R,{variant:"glass",class:"!mt-0 overflow-hidden relative"},{default:_(()=>[e("div",ve,[e("h1",xe,n(t(a)("Apply Leave")),1),e("p",we,n(t(a)("Apply for your time-off with details below.")),1)]),e("form",{onSubmit:U($,["prevent"]),class:"p-8 space-y-8"},[e("div",be,[e("div",ye,[o(x,{for:"type_id",value:t(a)("Type of Leave"),class:"!mb-0"},null,8,["value"]),e("div",ke,[A(e("select",{id:"type_id",class:"w-full bg-white/5 border border-white/10 text-gray-100 text-sm rounded-xl focus:ring-red-500 focus:border-red-500 block p-3 pr-10 appearance-none transition-all","onUpdate:modelValue":l[0]||(l[0]=r=>t(s).type=r)},[e("option",Be,n(t(a)("Choose a Leave Type")),1),(h(),m(L,null,C(g,r=>e("option",{key:r,value:r,class:"bg-[#18181b]"},n(r),9,Le)),64))],512),[[z,t(s).type]]),l[3]||(l[3]=e("div",{class:"absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-gray-500"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),o(w,{class:"mt-2",message:t(s).errors.type},null,8,["message"])]),e("div",Me,[o(x,{for:"date",value:t(a)("Date Range selection"),class:"!mb-0"},null,8,["value"]),o(t(J),{id:"date",modelValue:t(s).date,"onUpdate:modelValue":l[1]||(l[1]=r=>t(s).date=r),class:"modern-datepicker",placeholder:t(a)("Select Date..."),"enable-time-picker":!1,"min-date":j.value,"max-range":V.value,dark:!0,range:"",required:""},null,8,["modelValue","placeholder","min-date","max-range"]),o(w,{class:"mt-2",message:t(s).errors.date},null,8,["message"])])]),e("div",De,[o(x,{for:"remark",value:t(a)("Remark / Reason"),class:"!mb-0"},null,8,["value"]),A(e("textarea",{id:"remark",class:"w-full bg-white/5 border border-white/10 text-gray-100 text-sm rounded-xl focus:ring-red-500 focus:border-red-500 block p-4 min-h-[120px] transition-all placeholder:text-gray-600","onUpdate:modelValue":l[2]||(l[2]=r=>t(s).remark=r),autocomplete:"off",placeholder:t(a)("I will be absent for 3 days because...")},null,8,Ce),[[H,t(s).remark]]),o(w,{class:"mt-2",message:t(s).errors.remark},null,8,["message"])]),e("div",Ae,[o(x,{for:"support_doc",value:["Sick Leave","Emergency Leave"].includes(t(s).type)?t(a)("Supporting Document (Required)"):t(a)("Supporting Document (Optional)"),class:"!mb-0"},null,8,["value"]),e("div",Se,[e("div",Re,[e("input",{type:"file",id:"support_doc",onChange:E,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",accept:".jpg,.jpeg,.png,.pdf"},null,32),e("div",je,[o(t(O),{class:"w-4 h-4"}),B(" "+n(t(a)("Choose File")),1)])]),e("div",Ve,[e("p",$e,n(t(s).support_doc?t(s).support_doc.name:t(a)("No file selected")),1)])]),e("p",Ee,n(t(a)("Max 5MB. Formats: JPG, PNG, PDF.")),1),o(w,{class:"mt-2",message:t(s).errors.support_doc},null,8,["message"])]),e("div",Fe,[o(G,{class:"!bg-red-600 hover:!bg-red-700 !rounded-xl !px-10 !py-4 !text-white flex items-center gap-3 transition-all shadow-xl hover:shadow-red-500/20 group",disabled:t(s).processing},{default:_(()=>[e("span",qe,n(t(a)("Submit Request")),1),o(t(ee),{class:"w-5 h-5 group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"})]),_:1},8,["disabled"])])],32)]),_:1})])])])]),_:1})],64))}};export{Ge as default};
