import{_ as R,b as $}from"./Card-uT5VCw16.js";import{f as n,o as a,b as e,a as i,u as t,_ as s,Z as C,w as h,c as A,g as _,e as u,t as r,n as m,F as g,s as M,A as f,Q as b,T as w,k as x}from"./app-x9X0OzoV.js";import{_ as S}from"./FlexButton-DjHeePkC.js";import{r as B,_ as D}from"./ReqTabs-C6g6ll4v.js";import{a as N,r as Y}from"./useRequestStatusTypes-DSl29A32.js";import{r as E}from"./CalendarDaysIcon-DB0YYNJS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GoBackNavLink-DY91qUZX.js";function T(d,l){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}function V(d,l){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function L(d,l){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function P(d,l){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const q={class:"py-8 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8 animate-fade-in-up"},F={class:"p-8 border-b border-white/5 flex flex-col md:flex-row md:justify-between md:items-center gap-6 bg-white/[0.02]"},I={class:"text-3xl font-black text-white tracking-tight flex items-center gap-3"},O={class:"text-sm font-medium text-gray-500 bg-white/5 px-2.5 py-1 rounded-lg border border-white/10 uppercase tracking-widest"},z={class:"text-gray-400 text-sm mt-1"},H={class:"font-bold"},Q={class:"overflow-x-auto"},Z={class:"w-full text-left border-collapse"},G={class:"bg-black/20"},J={class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5"},K={class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5"},U={class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5 text-center"},W={class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5 text-center"},X={class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5 text-center"},ee={key:0,class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5"},te={key:1,class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5 text-right"},se={class:"divide-y divide-white/5"},re={class:"px-6 py-5 font-mono text-sm font-bold text-red-500/80"},oe={class:"px-6 py-5"},ae={class:"flex flex-col"},ne={class:"text-white font-bold group-hover:text-red-400 transition-colors"},ce={class:"text-xs text-gray-500"},ie={class:"px-6 py-5"},de={class:"flex items-center justify-center gap-3 text-sm"},le={class:"text-center"},pe={class:"text-white font-medium"},he={class:"text-[10px] text-gray-500 uppercase"},xe={class:"text-center"},ue={class:"text-white font-medium"},_e={class:"text-[10px] text-gray-500 uppercase"},me={class:"px-6 py-5 text-center"},ge={class:"px-6 py-5 text-center"},fe=["href","title"],be={key:1,class:"text-gray-600"},we={key:0,class:"px-6 py-5 max-w-[200px]"},ye={class:"text-sm text-gray-400 line-clamp-2"},ke={key:1,class:"px-6 py-5 text-right"},ve={key:0,class:"flex items-center justify-end gap-2"},je=["onClick","title"],Re=["onClick","title"],$e={key:1,class:"text-xs text-gray-500 italic"},Ce={key:2,class:"text-xs text-gray-500 italic"},Ae={key:0},Me={colspan:"5",class:"px-6 py-20 text-center"},Se={class:"flex flex-col items-center gap-4 opacity-20"},Be={class:"text-xl font-bold text-white"},Fe={__name:"Requests",props:{requests:Object,leaveBalances:Array,leaveTotals:Object},setup(d){const l=c=>{switch(c){case"Pending":return"text-amber-400 bg-amber-400/10 border-amber-400/20";case"Approved":return"text-emerald-400 bg-emerald-400/10 border-emerald-400/20";case"Rejected":return"text-rose-400 bg-rose-400/10 border-rose-400/20";default:return"text-gray-400 bg-gray-400/10 border-gray-400/20"}},y=c=>{w({status:1}).put(route("requests.update",{request:c}),{preserveScroll:!0,onSuccess:()=>{x().success(s("Request Approved"))},onError:o=>{x().error(o.status||s("Error Approving Request"))}})},k=c=>{w({status:2}).put(route("requests.update",{request:c}),{preserveScroll:!0,onSuccess:()=>{x().success(s("Request Rejected"))},onError:o=>{x().error(o.status||s("Error Rejecting Request"))}})},v=c=>{const p=b().props.auth.user.role,o=b().props.auth.user.id;return c.user_id===o?!1:p==="owner"&&c.employee_role==="admin"||p==="admin"&&c.employee_role==="employee"};return(c,p)=>(a(),n(g,null,[i(t(C),{title:t(s)("Requests")},null,8,["title"]),i($,null,{tabs:h(()=>[i(D)]),default:h(()=>[e("div",q,[i(R,{variant:"glass",class:"!mt-0 !p-0 overflow-hidden"},{default:h(()=>[e("div",F,[e("div",null,[e("h1",I,[u(r(t(s)("Leave Requests"))+" ",1),e("span",O,r(d.requests.data.length)+" "+r(t(s)("Total")),1)]),e("p",z,r(t(s)("Manage and track your time-off applications.")),1)]),["owner"].includes(c.$page.props.auth.user.role)?_("",!0):(a(),A(S,{key:0,href:c.route("requests.create"),class:m("!bg-red-600 hover:!bg-red-700 !rounded-xl !px-6 !py-3 !text-white flex items-center gap-2 transition-all shadow-xl hover:shadow-red-500/20 group")},{default:h(()=>[i(t(L),{class:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300"}),e("span",H,r(t(s)("New Request")),1)]),_:1},8,["href"]))]),e("div",Q,[e("table",Z,[e("thead",null,[e("tr",G,[e("th",J,r(t(s)("ID")),1),e("th",K,r(t(s)("Employee / Type")),1),e("th",U,r(t(s)("Duration")),1),e("th",W,r(t(s)("Status")),1),e("th",X,[i(t(B),{class:"w-4 h-4 mx-auto"})]),["admin","owner"].includes(c.$page.props.auth.user.role)?(a(),n("th",te,r(t(s)("Action")),1)):(a(),n("th",ee,r(t(s)("Reason")),1))])]),e("tbody",se,[(a(!0),n(g,null,M(d.requests.data,(o,De)=>(a(),n("tr",{key:o.id,class:"group hover:bg-white/[0.02] transition-colors"},[e("td",re," #"+r(o.id.toString().padStart(4,"0")),1),e("td",oe,[e("div",ae,[e("span",ne,r(o.employee_name),1),e("span",ce,r(o.type),1)])]),e("td",ie,[e("div",de,[e("div",le,[e("p",pe,r(t(f)(o.start_date).format("DD/MM/YYYY")),1),e("p",he,r(t(s)("Start")),1)]),i(t(T),{class:"w-3 h-3 text-red-500/40"}),e("div",xe,[e("p",ue,r(o.end_date?t(f)(o.end_date).format("DD/MM/YYYY"):t(s)("N/A")),1),e("p",_e,r(t(s)("End")),1)])])]),e("td",me,[e("span",{class:m([l(o.status),"inline-flex items-center px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border shadow-sm"])},r(t(N)[o.status.toLowerCase()]||o.status),3)]),e("td",ge,[o.support_doc?(a(),n("a",{key:0,href:o.support_doc,target:"_blank",class:"inline-flex items-center justify-center w-8 h-8 rounded-lg bg-white/5 text-gray-400 hover:text-white hover:bg-white/10 transition-colors border border-white/10",title:t(s)("View Document")},[i(t(Y),{class:"w-4 h-4"})],8,fe)):(a(),n("span",be,"-"))]),["admin","owner"].includes(c.$page.props.auth.user.role)?(a(),n("td",ke,[o.status==="Pending"&&v(o)?(a(),n("div",ve,[e("button",{onClick:j=>y(o.id),class:"inline-flex items-center gap-1.5 text-xs font-bold text-emerald-400 hover:text-white bg-emerald-500/10 hover:bg-emerald-600 px-3 py-2 rounded-lg border border-emerald-500/20 hover:border-emerald-600 transition-all shadow-sm",title:t(s)("Approve")},[i(t(V),{class:"w-4 h-4"}),u(" "+r(t(s)("Approve")),1)],8,je),e("button",{onClick:j=>k(o.id),class:"inline-flex items-center gap-1.5 text-xs font-bold text-rose-400 hover:text-white bg-rose-500/10 hover:bg-rose-600 px-3 py-2 rounded-lg border border-rose-500/20 hover:border-rose-600 transition-all shadow-sm",title:t(s)("Reject")},[i(t(P),{class:"w-4 h-4"}),u(" "+r(t(s)("Reject")),1)],8,Re)])):o.status==="Pending"?(a(),n("span",$e,r(t(s)("Awaiting approval")),1)):(a(),n("span",Ce,r(t(s)("Already processed")),1))])):(a(),n("td",we,[e("span",ye,r(o.remark||t(s)("No reason provided")),1)]))]))),128)),d.requests.data.length===0?(a(),n("tr",Ae,[e("td",Me,[e("div",Se,[i(t(E),{class:"w-16 h-16 text-white"}),e("p",Be,r(t(s)("No requests found")),1)])])])):_("",!0)])])])]),_:1})])]),_:1})],64))}};export{Fe as default};
