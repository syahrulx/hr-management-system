import{T as S,w as q,a as i,o as c,f as o,u as e,_ as l,Z as R,g,b as a,t as d,F as b,l as _,i as h,n as f,j as V,m as w,v as D,k as E,z as k,A as T,p,Q as B}from"./app-5PSfkqSm.js";import{_ as j}from"./AuthenticatedLayout-CH5_r5_h.js";import{_ as v,a as y}from"./InputLabel-CHaklMAF.js";import{P as A}from"./PrimaryButton-8qspkuii.js";import{_ as M}from"./ReqTabs-DILIDdq5.js";import{o as $}from"./main-AEwAPKvm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-Creu9mi5.js";import"./GoBackNavLink-B9RrW8Re.js";const Y={class:"py-10 min-h-screen"},z={class:"max-w-6xl mx-auto px-4 flex flex-col md:flex-row gap-10"},F={class:"w-full md:w-72 bg-gray-800/80 backdrop-blur border border-gray-700 rounded-2xl p-6 shadow-xl mb-8 md:mb-0 flex-shrink-0"},I={class:"text-base font-bold text-gray-200 mb-5 tracking-wide border-b border-gray-700 pb-2"},N={class:"space-y-4 mt-4"},U={class:"font-semibold flex items-center gap-2 text-gray-300"},P={key:0,class:"h-4 w-4 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},O={key:1,class:"h-4 w-4 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},Q={key:2,class:"h-4 w-4 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},Z={class:"flex-1"},G={class:"bg-gray-800/90 rounded-2xl shadow-xl border border-gray-700 p-8"},H={class:"text-2xl font-extrabold text-gray-100 tracking-tight mb-6"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},K={selected:"",value:""},W=["value"],X=["placeholder"],ee={class:"flex items-center justify-end"},ce={__name:"RequestCreate",props:{types:Array,leaveBalances:Array},setup(u){const L=["Annual Leave","Emergency Leave","Sick Leave"],s=S({type:"",date:"",remark:""});q(()=>s.type,n=>{n==="leave"&&(s.date="")});const C=()=>{Object.keys(s.date).forEach(function(n){s.date[n]&&!/^\d{4}-\d{2}-\d{2}$/.test(s.date[n])&&(s.date[n]=k(s.date[n]).format("YYYY-MM-DD"))}),console.log(s.date),s.post(route("requests.store"),{preserveScroll:!0,onError:()=>{B().props.errors.past_leave?p().error(B().props.errors.past_leave):p().error(l("Error Creating Request"))},onSuccess:()=>{p().success(l("Request Created Successfully")),s.reset()}})};return(n,t)=>(c(),i(b,null,[o(e(R),{title:e(l)("Request Leave")},null,8,["title"]),o(j,null,{tabs:g(()=>[o(M)]),default:g(()=>[a("div",Y,[a("div",z,[a("aside",F,[a("h2",I,d(e(l)("My Leave Balances")),1),a("ul",N,[(c(),i(b,null,_(["Annual Leave","Emergency Leave","Sick Leave"],r=>{var x;return a("li",{key:r,class:"flex items-center justify-between"},[a("span",U,[r==="Annual Leave"?(c(),i("svg",P,t[3]||(t[3]=[a("circle",{cx:"10",cy:"10",r:"10"},null,-1)]))):r==="Emergency Leave"?(c(),i("svg",O,t[4]||(t[4]=[a("rect",{width:"20",height:"20",rx:"4"},null,-1)]))):(c(),i("svg",Q,t[5]||(t[5]=[a("ellipse",{cx:"10",cy:"10",rx:"10",ry:"7"},null,-1)]))),h(" "+d(r),1)]),a("span",{class:f([u.leaveBalances&&((x=u.leaveBalances.find(m=>m.leave_type===r))!=null&&x.balance)?"bg-green-900 text-green-200":"bg-gray-700 text-gray-400","px-3 py-0.5 rounded-full text-xs font-bold min-w-[2rem] text-center shadow-sm"])},d(u.leaveBalances&&u.leaveBalances.find(m=>m.leave_type===r)?u.leaveBalances.find(m=>m.leave_type===r).balance:0),3)])}),64))])]),a("main",Z,[a("div",G,[a("h1",H,d(e(l)("Request Leave")),1),a("form",{onSubmit:V(C,["prevent"]),class:"space-y-8"},[a("div",J,[a("div",null,[o(v,{for:"type_id",value:e(l)("Type of Leave"),class:"mb-2"},null,8,["value"]),w(a("select",{id:"type_id",class:"w-full rounded-lg bg-gray-900 text-gray-100 border border-gray-700 px-4 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none","onUpdate:modelValue":t[0]||(t[0]=r=>e(s).type=r)},[a("option",K,d(e(l)("Choose a Leave Type")),1),(c(),i(b,null,_(L,r=>a("option",{key:r,value:r},d(r),9,W)),64))],512),[[D,e(s).type]]),o(y,{class:"mt-2",message:e(s).errors.type},null,8,["message"])]),a("div",null,[o(v,{for:"date",value:e(l)("Date (Range selection is available)"),class:"mb-2"},null,8,["value"]),o(e($),{id:"date",modelValue:e(s).date,"onUpdate:modelValue":t[1]||(t[1]=r=>e(s).date=r),class:f(["w-full rounded-lg bg-gray-900 text-gray-100 border border-gray-700 px-4 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none",{"border border-red-500":e(s).errors.date}]),placeholder:e(l)("Select Date..."),"enable-time-picker":!1,"min-date":e(s).type==="leave"?e(k)().tz().format():"",dark:E("isDark").value,range:"",required:""},null,8,["modelValue","class","placeholder","min-date","dark"]),o(y,{class:"mt-2",message:e(s).errors.date},null,8,["message"])])]),a("div",null,[o(v,{for:"remark",value:e(l)("Remark"),class:"mb-2"},null,8,["value"]),w(a("textarea",{id:"remark",class:f(["w-full rounded-lg bg-gray-900 text-gray-100 border border-gray-700 px-4 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none",{"border border-red-500":e(s).errors.remark}]),"onUpdate:modelValue":t[2]||(t[2]=r=>e(s).remark=r),autocomplete:"off",rows:"3",placeholder:e(l)("I will be absent for 3 days because I'm sick.")},null,10,X),[[T,e(s).remark]]),o(y,{class:"mt-2",message:e(s).errors.remark},null,8,["message"])]),a("div",ee,[o(A,{class:f(["px-6 py-2 rounded-full font-semibold text-base bg-blue-600 hover:bg-blue-700 text-white shadow transition ltr:ml-4 rtl:mr-4",{"opacity-25":e(s).processing}]),disabled:e(s).processing},{default:g(()=>[h(d(e(l)("Initiate Request")),1)]),_:1},8,["class","disabled"])])],32)])])])])]),_:1})],64))}};export{ce as default};
