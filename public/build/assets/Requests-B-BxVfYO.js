import{_ as R,b as j}from"./Card-COmB5SsI.js";import{f as n,o as a,b as e,a as i,u as t,_ as s,Z as $,w as h,c as C,h as _,e as u,t as r,n as m,F as g,s as A,Q as f,T as b,k as x}from"./app-2Hl2Ns8d.js";import{_ as S}from"./FlexButton-CtTbFM44.js";import{r as B,_ as N}from"./ReqTabs-CVuJ94kx.js";import{a as E,r as M}from"./useRequestStatusTypes-7_WSO2es.js";import{r as T}from"./CalendarDaysIcon-F2E8-13S.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./GoBackNavLink-CPb7MqMP.js";function V(d,l){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}function D(d,l){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function q(d,l){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function L(d,l){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const P={class:"py-8 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8 animate-fade-in-up"},F={class:"p-8 border-b border-white/5 flex flex-col md:flex-row md:justify-between md:items-center gap-6 bg-white/[0.02]"},I={class:"text-3xl font-black text-white tracking-tight flex items-center gap-3"},O={class:"text-sm font-medium text-gray-500 bg-white/5 px-2.5 py-1 rounded-lg border border-white/10 uppercase tracking-widest"},z={class:"text-gray-400 text-sm mt-1"},H={class:"font-bold"},Q={class:"overflow-x-auto"},Z={class:"w-full text-left border-collapse"},G={class:"bg-black/20"},J={class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5"},K={class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5"},U={class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5 text-center"},W={class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5 text-center"},X={class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5 text-center"},Y={key:0,class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5"},ee={key:1,class:"px-6 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-gray-500 border-b border-white/5 text-right"},te={class:"divide-y divide-white/5"},se={class:"px-6 py-5 font-mono text-sm font-bold text-red-500/80"},re={class:"px-6 py-5"},oe={class:"flex flex-col"},ae={class:"text-white font-bold group-hover:text-red-400 transition-colors"},ne={class:"text-xs text-gray-500"},ce={class:"px-6 py-5"},ie={class:"flex items-center justify-center gap-3 text-sm"},de={class:"text-center"},le={class:"text-white font-medium"},pe={class:"text-[10px] text-gray-500 uppercase"},he={class:"text-center"},xe={class:"text-white font-medium"},ue={class:"text-[10px] text-gray-500 uppercase"},_e={class:"px-6 py-5 text-center"},me={class:"px-6 py-5 text-center"},ge=["href","title"],fe={key:1,class:"text-gray-600"},be={key:0,class:"px-6 py-5 max-w-[200px]"},we={class:"text-sm text-gray-400 line-clamp-2"},ye={key:1,class:"px-6 py-5 text-right"},ke={key:0,class:"flex items-center justify-end gap-2"},ve=["onClick","title"],Re=["onClick","title"],je={key:1,class:"text-xs text-gray-500 italic"},$e={key:2,class:"text-xs text-gray-500 italic"},Ce={key:0},Ae={colspan:"5",class:"px-6 py-20 text-center"},Se={class:"flex flex-col items-center gap-4 opacity-20"},Be={class:"text-xl font-bold text-white"},Fe={__name:"Requests",props:{requests:Object,leaveBalances:Array,leaveTotals:Object},setup(d){const l=c=>{switch(c){case"Pending":return"text-amber-400 bg-amber-400/10 border-amber-400/20";case"Approved":return"text-emerald-400 bg-emerald-400/10 border-emerald-400/20";case"Rejected":return"text-rose-400 bg-rose-400/10 border-rose-400/20";default:return"text-gray-400 bg-gray-400/10 border-gray-400/20"}},w=c=>{b({status:1}).put(route("requests.update",{request:c}),{preserveScroll:!0,onSuccess:()=>{x().success(s("Request Approved"))},onError:o=>{x().error(o.status||s("Error Approving Request"))}})},y=c=>{b({status:2}).put(route("requests.update",{request:c}),{preserveScroll:!0,onSuccess:()=>{x().success(s("Request Rejected"))},onError:o=>{x().error(o.status||s("Error Rejecting Request"))}})},k=c=>{const p=f().props.auth.user.role,o=f().props.auth.user.id;return c.user_id===o?!1:p==="owner"&&c.employee_role==="admin"||p==="admin"&&c.employee_role==="employee"};return(c,p)=>(a(),n(g,null,[i(t($),{title:t(s)("Requests")},null,8,["title"]),i(j,null,{tabs:h(()=>[i(N)]),default:h(()=>[e("div",P,[i(R,{variant:"glass",class:"!mt-0 !p-0 overflow-hidden"},{default:h(()=>[e("div",F,[e("div",null,[e("h1",I,[u(r(t(s)("Leave Requests"))+" ",1),e("span",O,r(d.requests.data.length)+" "+r(t(s)("Total")),1)]),e("p",z,r(t(s)("Manage and track your time-off applications.")),1)]),["owner"].includes(c.$page.props.auth.user.role)?_("",!0):(a(),C(S,{key:0,href:c.route("requests.create"),class:m("!bg-red-600 hover:!bg-red-700 !rounded-xl !px-6 !py-3 !text-white flex items-center gap-2 transition-all shadow-xl hover:shadow-red-500/20 group")},{default:h(()=>[i(t(q),{class:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300"}),e("span",H,r(t(s)("New Request")),1)]),_:1},8,["href"]))]),e("div",Q,[e("table",Z,[e("thead",null,[e("tr",G,[e("th",J,r(t(s)("ID")),1),e("th",K,r(t(s)("Employee / Type")),1),e("th",U,r(t(s)("Duration")),1),e("th",W,r(t(s)("Status")),1),e("th",X,[i(t(B),{class:"w-4 h-4 mx-auto"})]),["admin","owner"].includes(c.$page.props.auth.user.role)?(a(),n("th",ee,r(t(s)("Action")),1)):(a(),n("th",Y,r(t(s)("Reason")),1))])]),e("tbody",te,[(a(!0),n(g,null,A(d.requests.data,(o,Ne)=>(a(),n("tr",{key:o.id,class:"group hover:bg-white/[0.02] transition-colors"},[e("td",se," #"+r(o.id.toString().padStart(4,"0")),1),e("td",re,[e("div",oe,[e("span",ae,r(o.employee_name),1),e("span",ne,r(o.type),1)])]),e("td",ce,[e("div",ie,[e("div",de,[e("p",le,r(o.start_date),1),e("p",pe,r(t(s)("Start")),1)]),i(t(V),{class:"w-3 h-3 text-red-500/40"}),e("div",he,[e("p",xe,r(o.end_date??t(s)("N/A")),1),e("p",ue,r(t(s)("End")),1)])])]),e("td",_e,[e("span",{class:m([l(o.status),"inline-flex items-center px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border shadow-sm"])},r(t(E)[o.status.toLowerCase()]||o.status),3)]),e("td",me,[o.support_doc?(a(),n("a",{key:0,href:o.support_doc,target:"_blank",class:"inline-flex items-center justify-center w-8 h-8 rounded-lg bg-white/5 text-gray-400 hover:text-white hover:bg-white/10 transition-colors border border-white/10",title:t(s)("View Document")},[i(t(M),{class:"w-4 h-4"})],8,ge)):(a(),n("span",fe,"-"))]),["admin","owner"].includes(c.$page.props.auth.user.role)?(a(),n("td",ye,[o.status==="Pending"&&k(o)?(a(),n("div",ke,[e("button",{onClick:v=>w(o.id),class:"inline-flex items-center gap-1.5 text-xs font-bold text-emerald-400 hover:text-white bg-emerald-500/10 hover:bg-emerald-600 px-3 py-2 rounded-lg border border-emerald-500/20 hover:border-emerald-600 transition-all shadow-sm",title:t(s)("Approve")},[i(t(D),{class:"w-4 h-4"}),u(" "+r(t(s)("Approve")),1)],8,ve),e("button",{onClick:v=>y(o.id),class:"inline-flex items-center gap-1.5 text-xs font-bold text-rose-400 hover:text-white bg-rose-500/10 hover:bg-rose-600 px-3 py-2 rounded-lg border border-rose-500/20 hover:border-rose-600 transition-all shadow-sm",title:t(s)("Reject")},[i(t(L),{class:"w-4 h-4"}),u(" "+r(t(s)("Reject")),1)],8,Re)])):o.status==="Pending"?(a(),n("span",je,r(t(s)("Awaiting approval")),1)):(a(),n("span",$e,r(t(s)("Already processed")),1))])):(a(),n("td",be,[e("span",we,r(o.remark||t(s)("No reason provided")),1)]))]))),128)),d.requests.data.length===0?(a(),n("tr",Ce,[e("td",Ae,[e("div",Se,[i(t(T),{class:"w-16 h-16 text-white"}),e("p",Be,r(t(s)("No requests found")),1)])])])):_("",!0)])])])]),_:1})])]),_:1})],64))}};export{Fe as default};
